<!DOCTYPE html><html lang="zh-cn"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="本文你主要用于记录viewport适配方案在Ng中的应用.具体viewport方案的优劣和介绍不做过多介绍."><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>Angular-Viewport适配方案 | Mccc</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 7.3.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-noise-link" href="/tags/Angualr/" rel="tag">Angualr</a></div><div class="post-time">2022-07-27</div></div></div><div class="container post-header"><h1>Angular-Viewport适配方案</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion"></summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85webpack%E8%87%AA%E5%AE%9A%E4%B9%89%E6%89%93%E5%8C%85%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">1.安装webpack自定义打包库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AEangular-json"><span class="toc-number">2.</span> <span class="toc-text">2.配置angular.json</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85postcss-px-to-viewport"><span class="toc-number">3.</span> <span class="toc-text">3.安装postcss-px-to-viewport</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AEwebpack-config-js"><span class="toc-number">4.</span> <span class="toc-text">4.配置webpack.config.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%AE%BE%E7%BD%AEmata%E6%A0%87%E7%AD%BE"><span class="toc-number">5.</span> <span class="toc-text">5. 设置mata标签</span></a></li></ol></details></div><div class="container post-content"><p>本文你主要用于记录viewport适配方案在Ng中的应用.具体viewport方案的优劣和介绍不做过多介绍.</p>
<h2 id="1-安装webpack自定义打包库"><a href="#1-安装webpack自定义打包库" class="headerlink" title="1.安装webpack自定义打包库"></a>1.安装webpack自定义打包库</h2><div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @angular-builders/custom-webpack</span><br></pre></td></tr></table></figure></div>

<p>安装前请确认自己的Ng版本,不同版本在<code>angular.json</code>的配置上有略微不同;<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@angular-builders/custom-webpack">查看版本</a></p>
<h2 id="2-配置angular-json"><a href="#2-配置angular-json" class="headerlink" title="2.配置angular.json"></a>2.配置<code>angular.json</code></h2><p>以下是<font color="red">Angularg9</font>的配置规则,修改<code>builder</code>,并添加<code>options</code>规则</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;projects&quot;: &#123;</span><br><span class="line">    &quot;xxxx&quot;: &#123;</span><br><span class="line">      &quot;architect&quot;: &#123;</span><br><span class="line">        &quot;build&quot;: &#123;</span><br><span class="line">          &quot;builder&quot;: &quot;@angular-builders/custom-webpack:browser&quot;,</span><br><span class="line">          &quot;options&quot;: &#123;</span><br><span class="line">            &quot;customWebpackConfig&quot;: &#123;</span><br><span class="line">              &quot;path&quot;: &quot;./webpack.config.js&quot;,</span><br><span class="line">              &quot;mergeRules&quot;: &#123;</span><br><span class="line">                &quot;module.rules&quot;: &quot;prepend&quot;//自定义配置规则</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;serve&quot;: &#123;</span><br><span class="line">          &quot;builder&quot;: &quot;@angular-builders/custom-webpack:dev-server&quot;,</span><br><span class="line">          &quot;options&quot;: &#123;</span><br><span class="line">            &quot;browserTarget&quot;: &quot;angular02:build&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<h2 id="3-安装postcss-px-to-viewport"><a href="#3-安装postcss-px-to-viewport" class="headerlink" title="3.安装postcss-px-to-viewport"></a>3.安装<code>postcss-px-to-viewport</code></h2><div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D postcss-px-to-viewport</span><br></pre></td></tr></table></figure></div>
<p>本文只安装并配置了 postcss-px-to-viewport插件,其余请根据需要自行安装并配置webpack</p>
<h2 id="4-配置webpack-config-js"><a href="#4-配置webpack-config-js" class="headerlink" title="4.配置webpack.config.js"></a>4.配置<code>webpack.config.js</code></h2><div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const postcssLoader = &#123;</span><br><span class="line">  loader: &#x27;postcss-loader&#x27;,</span><br><span class="line">  options: &#123;</span><br><span class="line">    ident: &#x27;postcss&#x27;,</span><br><span class="line">    // syntax: &#x27;postcss-scss&#x27;,</span><br><span class="line">    plugins: () =&gt; [</span><br><span class="line">      require(&#x27;postcss-px-to-viewport&#x27;)(&#123;</span><br><span class="line">        viewportWidth: 375, // 视窗的宽度，对应的是我们设计稿的宽度，一般是750</span><br><span class="line">        viewportHeight: 667, // 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置</span><br><span class="line">        unitPrecision: 5, // 指定`px`转换为视窗单位值的小数位数</span><br><span class="line">        viewportUnit: &quot;vw&quot;, //指定需要转换成的视窗单位，建议使用vw</span><br><span class="line">        selectorBlackList: [&#x27;.ignore&#x27;], // 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名</span><br><span class="line">        minPixelValue: 1, // 小于或等于`1px`不转换为视窗单位，你也可以设置为你想要的值</span><br><span class="line">        mediaQuery: false, // 允许在媒体查询中转换`px`</span><br><span class="line">        include: /\/src\//,</span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module.exports = (config) =&gt; &#123;</span><br><span class="line">  config.module.rules = config.module.rules.filter(</span><br><span class="line">    rule =&gt; rule.test.toString() !== &quot;/\\.scss$|\\.sass$/|\\.less$|\\.styl$|\\.css$&quot;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  // 配置自定义的scss处理</span><br><span class="line">  config.module.rules.push(&#123;</span><br><span class="line">    test: /\.(scss|sass)$/,</span><br><span class="line">    use: [</span><br><span class="line">      postcssLoader</span><br><span class="line">    ],</span><br><span class="line">  &#125;);</span><br><span class="line">  return config</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="5-设置mata标签"><a href="#5-设置mata标签" class="headerlink" title="5. 设置mata标签"></a>5. 设置mata标签</h2><p><code>&lt;meta content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; name=&quot;viewport&quot;&gt;</code></p>
</div></div><div class="post-main post-comment"><div id="giscus_thread"></div><script src="https://giscus.app/client.js"
        data-repo="angelise7/blog-comments"
        data-repo-id="R_kgDOPQr6lw"
        data-category=""
        data-category-id=""
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script></div></article><link rel="stylesheet" type="text/css" href="/css/third-party/font-awesome/4.5.0/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/lato-font/3.0.0/css/lato-font.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.css"><script src="/js/third-party/jquery/2.0.3/jquery.min.js"></script><script src="/js/third-party/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>