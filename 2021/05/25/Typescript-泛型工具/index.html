<!DOCTYPE html><html lang="zh-cn"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;1-可选泛型&quot;&gt;&lt;a href=&quot;#1-可选泛型&quot; class=&quot;headerlink&quot; title=&quot;1.可选泛型&quot;&gt;&lt;/a&gt;1.可选泛型&lt;/h4&gt;&lt;p&gt;将泛型中的所有属性变为可选."><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>TypeScript-泛型工具 | Mccc</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 7.3.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-noise-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></div><div class="post-time">2021-05-25</div></div></div><div class="container post-header"><h1>TypeScript-泛型工具</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion"></summary><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8F%AF%E9%80%89%E6%B3%9B%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text">1.可选泛型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%B0%86K%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7%E8%BD%AC%E6%8D%A2%E4%B8%BAT%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">2.将K类型的所有属性转换为T类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BB%8ET%E7%B1%BB%E5%9E%8B%E4%B8%AD%E6%8F%90%E5%8F%96K%E7%9A%84%E9%94%AE%E5%80%BC%E5%88%97%E5%87%BA%E6%9D%A5%E7%BB%84%E6%88%90%E6%96%B0%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">3.从T类型中提取K的键值列出来组成新的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%8E%BB%E9%99%A4T%E7%B1%BB%E5%9E%8B%E5%92%8CU%E7%B1%BB%E5%9E%8B%E4%B8%AD%E7%9A%84%E4%BA%A4%E9%9B%86-%E5%8F%96%E5%89%A9%E4%BD%99%E9%83%A8%E5%88%86"><span class="toc-number">4.</span> <span class="toc-text">4.去除T类型和U类型中的交集,取剩余部分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%8E%BB%E9%99%A4T%E7%B1%BB%E5%9E%8B%E4%B8%AD%E5%8C%85%E5%90%AB%E7%9A%84K%E9%94%AE%E5%80%BC%E5%AF%B9"><span class="toc-number">5.</span> <span class="toc-text">5.去除T类型中包含的K键值对</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%B0%86%E7%B1%BB%E5%9E%8BT%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7%E5%8F%98%E4%B8%BA%E5%BF%85%E9%80%89%E9%A1%B9"><span class="toc-number">6.</span> <span class="toc-text">6.将类型T中的所有属性变为必选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E8%8E%B7%E5%8F%96T%E7%B1%BB%E5%9E%8B%E5%AF%B9%E5%BA%94%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.</span> <span class="toc-text">7.获取T类型对应的返回值类型</span></a></li></ol></details></div><div class="container post-content"><h4 id="1-可选泛型"><a href="#1-可选泛型" class="headerlink" title="1.可选泛型"></a>1.可选泛型</h4><p>将泛型中的所有属性变为可选.</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type Partial&lt;T&gt; = &#123;</span><br><span class="line">	[P in keyof T]?: T[P]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p>举例:</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type Person = &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">  gender: string;</span><br><span class="line">  height: number;</span><br><span class="line">  weight: number;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>再使用Partial包裹</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type PartOfPerson = Partial&lt;Person&gt;;</span><br><span class="line"></span><br><span class="line">const ben: PartOfPerson = &#123;</span><br><span class="line">  name: &#x27;Ben&#x27;,</span><br><span class="line">  age: 18,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<br>

<h4 id="2-将K类型的所有属性转换为T类型"><a href="#2-将K类型的所有属性转换为T类型" class="headerlink" title="2.将K类型的所有属性转换为T类型"></a>2.将K类型的所有属性转换为T类型</h4><div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type Record&lt;K extends keyof any, T&gt; = &#123;</span><br><span class="line">    [P in K]: T;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>这里的K实际作为键值使用,所以仅可用<code>number|string|symbol</code>类型</p>
<p>举例:</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const obj: Record&lt;string, string | number&gt; = &#123;</span><br><span class="line">  name: &#x27;zhangsan&#x27;,</span><br><span class="line">  age: 18,</span><br><span class="line">  weight: 80,</span><br><span class="line">  gender: &#x27;男&#x27;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface CatInfo &#123;</span><br><span class="line">  age: number;</span><br><span class="line">  breed: string;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">type CatName = &quot;miffy&quot; | &quot;boris&quot; | &quot;mordred&quot;;</span><br><span class="line"> </span><br><span class="line">const cats: Record&lt;CatName, CatInfo&gt; = &#123;</span><br><span class="line">  miffy: &#123; age: 10, breed: &quot;Persian&quot; &#125;,</span><br><span class="line">  boris: &#123; age: 5, breed: &quot;Maine Coon&quot; &#125;,</span><br><span class="line">  mordred: &#123; age: 16, breed: &quot;British Shorthair&quot; &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<br>

<h4 id="3-从T类型中提取K的键值列出来组成新的类型"><a href="#3-从T类型中提取K的键值列出来组成新的类型" class="headerlink" title="3.从T类型中提取K的键值列出来组成新的类型"></a>3.从T类型中提取K的键值列出来组成新的类型</h4><div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type Pick&lt;T, K extends keyof T&gt; = &#123;</span><br><span class="line">    [P in K]: T[P];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>举例:定义一个人的类型</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type Person = &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">  gender: string;</span><br><span class="line">  height: number;</span><br><span class="line">  weight: number;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p>重新定义一个只有名字和年龄的类型</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type NewPerson = Pick&lt;Person, &#x27;name&#x27; | &#x27;age&#x27;&gt;;</span><br><span class="line"></span><br><span class="line">const Mike: NewPerson = &#123;</span><br><span class="line">  name: &#x27;mike&#x27;,</span><br><span class="line">  age: 20,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<br>

<h4 id="4-去除T类型和U类型中的交集-取剩余部分"><a href="#4-去除T类型和U类型中的交集-取剩余部分" class="headerlink" title="4.去除T类型和U类型中的交集,取剩余部分"></a>4.去除T类型和U类型中的交集,取剩余部分</h4><p><code>type Exclude&lt;T, U&gt; = T extends U ? never : T;</code></p>
<p>举例:</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type T1 = Exclude&lt;&quot;a&quot; | &quot;b&quot; | &quot;c&quot;, &quot;a&quot; | &quot;b&quot;&gt;; // &quot;c&quot;</span><br><span class="line">type T2 = Exclude&lt;string | number | (() =&gt; void), Function | string&gt;; // &quot;number&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>
<br>

<h4 id="5-去除T类型中包含的K键值对"><a href="#5-去除T类型中包含的K键值对" class="headerlink" title="5.去除T类型中包含的K键值对"></a>5.去除T类型中包含的K键值对</h4><p><code>type Omit = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;</code></p>
<p>举例:</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type Person = &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">  gender: string;</span><br><span class="line">  height: number;</span><br><span class="line">  weight: number;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>去除<code>Person</code>类型中的<code>height</code>和<code>weight</code>属性</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type NewPerson = Omit&lt;Person, &#x27;height&#x27; | &#x27;age&#x27;&gt;;</span><br><span class="line"></span><br><span class="line">const Mike: NewPerson = &#123; name: &#x27;Mike&#x27;, age: 18, gender: &#x27;男&#x27; &#125;;</span><br></pre></td></tr></table></figure></div>

<br>

<h4 id="6-将类型T中的所有属性变为必选项"><a href="#6-将类型T中的所有属性变为必选项" class="headerlink" title="6.将类型T中的所有属性变为必选项"></a>6.将类型T中的所有属性变为必选项</h4><div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type Required&lt;T&gt; = &#123;</span><br><span class="line">  [P in keyof T]-?: T[P]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>举例:</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">type Person = &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">  gender: string;</span><br><span class="line">  height?: number;</span><br><span class="line">  weight?: number;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p>将Person中的height和weight属性变为必选项目</p>
<div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">type AllPerson = Required&lt;Person&gt;;</span><br><span class="line"></span><br><span class="line">const Mike: AllPerson = &#123;</span><br><span class="line">  name: &#x27;Mike&#x27;,</span><br><span class="line">  age: 18,</span><br><span class="line">  gender: &#x27;男&#x27;,</span><br><span class="line">  height: 180,</span><br><span class="line">  weight: 80,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<br>

<h4 id="7-获取T类型对应的返回值类型"><a href="#7-获取T类型对应的返回值类型" class="headerlink" title="7.获取T类型对应的返回值类型"></a>7.获取T类型对应的返回值类型</h4><div class="noise-code-block" style="--code-block-max-height:inherit;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type ReturnType&lt;T extends (...args: any) =&gt; any&gt; = T extends (...args: any) =&gt; infer R ? R : any;</span><br></pre></td></tr></table></figure></div>

<br>
#### 8.总结

<p>| 工具|特征|<br>|-| :- | :-: | -: |<br>|<code>Partial&lt;T&gt;</code>|将类型中全部属性变为可选的|<br>|<code>Required&lt;T&gt;</code>|将类型T中的所有属性变为必选项|<br>|<code>Record&lt;K, T&gt;</code>|将K类型的所有属性转换为T类型|<br>|<code>Pick&lt;T, K&gt;</code>|从T类型中提取K的键值列出来组成新的类型|<br>|<code>Exclude&lt;T, U&gt;</code>|去除T类型和U类型中的交集,取剩余部分|<br>|<code>Omit&lt;T, K&gt;</code>|去除T类型中包含的K键值对|<br>|<code>ReturnType&lt;T&gt;</code>|获取T类型(函数)对应的返回值类型|<br>|<code>Readonly&lt;T&gt;</code>|将类型T中所有属性变为只读|<br>|<code>Extract&lt;T,K&gt;</code>|取T类型和K类型的交集组成新的类型|<br>|<code>NonNullable&lt;T&gt;</code>|去除T类型中的null和undefined类型</p>
</div></div><div class="post-main post-comment"><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'MCCC-1';
var disqus_identifier = '2021/05/25/Typescript-泛型工具/';
var disqus_title = 'TypeScript-泛型工具';
var disqus_url = 'http://example.com/2021/05/25/Typescript-%E6%B3%9B%E5%9E%8B%E5%B7%A5%E5%85%B7/';
(function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a target="_blank" rel="noopener" href="http://disqus.com" class="dsq-brlink">Blog comments powered by <span class="logo-disqus">Disqus</span></a><div id="giscus_thread"></div><script src="https://giscus.app/client.js"
        data-repo="angelise7/blog-comments"
        data-repo-id="R_kgDOPQr6lw"
        data-category=""
        data-category-id=""
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script></div></article><link rel="stylesheet" type="text/css" href="/css/third-party/font-awesome/4.5.0/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/lato-font/3.0.0/css/lato-font.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.css"><script src="/js/third-party/jquery/2.0.3/jquery.min.js"></script><script src="/js/third-party/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>